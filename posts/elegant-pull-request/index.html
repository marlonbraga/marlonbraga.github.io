<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Making elegant Pull Requests | Marlon Braga</title> <meta name="author" content="Marlon Braga"> <meta name="description" content="What should we write in our PR description?"> <meta name="keywords" content="developer, programmer, software, coder, engineer, dotnet, c-sharp, c#"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700%7CRoboto+Slab:100,300,400,500,700%7CMaterial+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%A8%F0%9F%8F%BB%E2%80%8D%F0%9F%92%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://marlonbraga.github.io/posts/elegant-pull-request/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/monokai.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Marlon¬†</span>Braga</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Posts</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Curriculum Vitae</a> </li> <li class="nav-item "> <a class="nav-link" href="/_pages/buymeacoffee/">Buy me a coffee</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container-lg mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Making elegant Pull Requests</h1> <p class="post-meta">February 16, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a> ¬† ¬∑ ¬† <a href="/blog/tag/formatting"> <i class="fas fa-hashtag fa-sm"></i> formatting</a> ¬† <a href="/blog/tag/code"> <i class="fas fa-hashtag fa-sm"></i> code</a> ¬† ¬† ¬∑ ¬† <a href="/blog/category/sample-posts"> <i class="fas fa-tag fa-sm"></i> sample-posts</a> ¬† ¬† ¬∑ ¬† <a href="/posts/elegant-pull-request/" class="en" style="pointer-events: none"><i class="fas fa-language fa-sm"></i> en</a>¬†¬†¬† <a href="/posts/pull-request-elegante/" class="pt-br"><i class="fas fa-language fa-sm"></i> pt-br</a>¬†¬†¬† </p> </header> <article class="post-content"> <p>Reviewing someone else‚Äôs code can be a thankless task. Especially when it contains a large amount of changes.</p> <p>The ideal is always to opt for small pull-requests. But that is always possible.</p> <p>In these cases, we can make life easier for the unfortunate creature who will have to review this almost infinite amount of changes in a code. After all, we don‚Äôt want bugs to make it into our repository‚Äôs master branch, and this code wasn‚Äôt written by him.</p> <p>A good Readme can be helpful in this task. But what would it be relevant to put in a Pull Request description?</p> <h2 id="goal">Goal</h2> <p>Why was it necessary to create this PR? What problems does it solve?</p> <ul> <li>Print if it has a GUI</li> <li>User story/functional requirement/use case link</li> </ul> <p>Ex.:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The purpose of these changes is the refactoring of the `GameService` class.
More specifically, the `SaveGame` method.
</code></pre></div></div> <h2 id="design-decisions">Design decisions</h2> <p>But why did you need to create a new class instead of using the existing one? Why separate a piece of code from a class? Did you really need that much interface? Why are these new classes in that directory and not in the root folder?</p> <p>No. Code reviewers are not fortune tellers. The code design decisions aren‚Äôt obvious, and it wouldn‚Äôt be elegant to let him spend time trying to decipher choices you could write in a few characters. What is relevant is the following:</p> <ul> <li>Which Interfacesm classes or methods were changed/created</li> <li>What was the purpose of making each change?</li> <li>What decisions were taken</li> <li>What design principle was considered to make this decision? SOLID?</li> </ul> <p>A basic class diagram can save you precious time if you really want people to understand what you‚Äôve done.</p> <p>Ex.:</p> <blockquote> <p>To allow the creation of unit tests, it was necessary to adapt the class to the principle of Inversion of Control (SOLID). All database context calls removed from service class for new DAO classes <code class="language-plaintext highlighter-rouge">CreatureRepository</code> , <code class="language-plaintext highlighter-rouge">PlayersRepository</code>, <code class="language-plaintext highlighter-rouge">ExperiencePointsRepository</code>. The <code class="language-plaintext highlighter-rouge">DungeonBuilderService</code> class starts to depend on its abstractions, allowing the necessary decoupling to carry out unit tests.</p> </blockquote> <p><img src="/assets/img/2023-02-16-pull-request-elegante/class-diagram.png" alt="Class diagram"></p> <h2 id="code-quality-metrics">Code Quality Metrics</h2> <p>Assure the reviewer that you cared about keeping your code maintainable instead of messing around just to get the job done faster.</p> <p>Facts don‚Äôt care about anyone‚Äôs opinion. Metrics tell the facts and trump the opinion of your most picky reviewers. It‚Äôs a way around the ‚Äúwriting style‚Äù objection. After all, should we sacrifice our code maintainability rating for a reviewer‚Äôs whim? Do aesthetic preferences matter as much as a drop in class coupling or a method that was born with low cognitive complexity? Obs.: (If your code is violating any pre-established agreement or standard by the team, it is not a matter of opinion. You should change it)</p> <p>A screenshot of the Visual Studio Code Analyzer is welcome. But a simple table will do.</p> <p>Ex.:</p> <blockquote> <p>Resulting code demonstrated greater readability.</p> <ul> <li>Increased maintainability index <em>(from 24 to 51)</em> </li> <li>Decrease in Class Coupling <em>(from 16 to 10)</em> </li> <li>Reduction of Cyclomatic Complexity <em>(from 47 to 5)</em> </li> <li>Reduction of lines of code <em>(from 133 to 35)</em> </li> </ul> <p>Part of this improvement was due to <em>method extraction</em> creating <code class="language-plaintext highlighter-rouge">ConverterModelParaEntidade()</code>.</p> </blockquote> <table> <thead> <tr> <th><strong>METRIC</strong></th> <th style="text-align: center"><strong>INDICATOR</strong></th> <th style="text-align: left"><strong>COMPARATIVE</strong></th> </tr> </thead> <tbody> <tr> <td>Maintainability Index</td> <td style="text-align: center">51</td> <td style="text-align: left">+ 27%</td> </tr> <tr> <td>Cyclimatic Complexity</td> <td style="text-align: center">5</td> <td style="text-align: left">- 42%</td> </tr> <tr> <td>Class Coupling</td> <td style="text-align: center">0</td> <td style="text-align: left">- 6%</td> </tr> <tr> <td>Lines of code</td> <td style="text-align: center">35</td> <td style="text-align: left">- 98</td> </tr> </tbody> </table> <p><img src="/assets/img/2023-02-16-pull-request-elegante/code-metrics.png" alt="Code_metrics"></p> <p>As a code professional, it‚Äôs better to be recognized for the quality of my work than the speed with which I deliver. This is a great way to show off.</p> <h2 id="tests">Tests</h2> <p>Yes. It is necessary to know if this is working and if it is breaking something. Running automated tests are useful for showing that you‚Äôve done the bare minimum expected of you. But a more detailed analysis can give an overall picture of the quality of what you‚Äôve done specifically. Some important information is:</p> <ul> <li>How many automated tests were created</li> <li>What is the percentage of changed code coverage</li> <li>How many code streams are being tested</li> <li>Performance Variation</li> <li>What manual tests were performed</li> </ul> <p>Ex.:</p> <blockquote> <ul> <li>2 new unit tests created</li> <li>Coverage of all code streams of the method in question (2/2)</li> <li>100% code coverage on the method in question</li> <li>Increased code coverage in related methods</li> </ul> </blockquote> <p><img src="/assets/img/2023-02-16-pull-request-elegante/code-coverage.png" alt="code-coverage"></p> <h2 id="integration">Integration</h2> <p>Sometimes the change is not with the code but with the change itself and how much it can affect the stability of the system in operation.</p> <ul> <li>Impacts other areas</li> <li>Does it impact systems already in operation?</li> <li>Is there any configuration in the system to be done?</li> </ul> <hr> <h2 id="pr-template">PR Template:</h2> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The purpose of these changes is __________.

### **üìêDesign Decisions**
To allow the creation of unit tests, it was necessary to adapt the class to the principle of **Inversion of control (SOLID)** .
All database context calls have been removed from the service class for new DAO classes `______` , `______`, `______`. The `ResgatesAgendadosService` class starts to depend on its abstractions, allowing the necessary decoupling to carry out unit tests.

![Class diagram](image.jpg)

# üå°Ô∏èCode quality
Resulting code demonstrated greater readability.
- Increased maintainability index
- Decreased Coupling of Classes
- Reduction of Cyclomatic Complexity
- Reduction of lines of code
Part of this improvement was due to *method extraction* creating ` ______()`.

![Code_metrics](image.png)
| **METRIC**                 | **INDICATOR** | **EVOLUTION** |
| -------------------------- |:-------------:|:------------ :|
| Cognitive Complexity       | 10%           | + 100%        |
| Cyclimatic Complexity      | 1             | + 100%        |
| Inheritance Depth          | 0             | - 100%        |
| Maintainability Index      | 100           | + 100%        |
| Class Coupling             | 0             | - 100%        |
| Lines of code              | 1000          | + 100%        |

# üß™Automated Tests
   - ___ new unit tests created
   - Coverage of all code streams of the method in question (___/___)
   - ___% code coverage on the method in question
   - Increased code coverage in related methods

![tests](image.png)

Coverage
![code-cov](image.png)

</code></pre></div></div> </article> <br> <br> <br> <br> <br> <br> <br> <br><div id="disqus_thread" style="max-width: 800px; margin: 0 auto;"> <script type="text/javascript">var disqus_shortname="marlonbraga-1",disqus_identifier="/posts/elegant-pull-request",disqus_title="Making elegant Pull Requests";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by Disqus.</a> </noscript> </div> <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="marlonbraga" data-description="Support me on Buy me a coffee!" data-message="" data-color="#0073DF" data-position="Right" data-x_margin="18" data-y_margin="18"></script> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="marlonbraga" data-description="Support me on Buy me a coffee!" data-message="" data-color="#0073DF" data-position="Right" data-x_margin="18" data-y_margin="18"></script> </body> </html>